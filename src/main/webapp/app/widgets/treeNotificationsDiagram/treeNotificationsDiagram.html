<!--<script src="/app/widgets/treeNotificationsDiagram/treeNotificationsDiagramService.js"></script>-->
<div class="tree-notif-widget" ng-controller="treeNotificationsDiagramWidgetCtrl">
    <div class="container-fluid">        
        <div style = "display: none" class="row">
            <div class = "col-xs-6">
                <div class = "row">
                    <div class = "col-xs-1">
                        <img height="16" width="16" ng-src="{{data.imgPath}}">
                    </div>
                    <div class = "col-xs-10">                        
                        <div class = "nmc-cw-widget-zpname" ng-bind="widgetOptions.zpointName"></div>
                    </div>
                </div>
                <div class = "row">
                    <div class = "col-xs-12">
                        <label class = "nmc-cw-widget-label">Период:</label>
                        <select class="form-control nmc-select-form nmc-cw-widget-modes"
                                ng-model = "data.currentMode"
                                ng-options = "mode as mode.caption for mode in data.MODES"
                                ng-change = "modeChange()">
                        </select>
                    </div>
                </div>                
            </div>
            <div class = "col-xs-6">
                <div class = "row">
                    <div class = "col-xs-6 nmc-cw-widget-btnpanel">
<!--
                        <a href="" class = "nmc-cw-widget-a-status">

                            <img class = "nmc-cw-widget-statusimg"                              
                             height = "40" width = "40"
                                 ng-attr-id = "{{'zpStatusImg' + widgetOptions.contZpointId}}"
                             ng-src = "{{data.zpointStatus}}" 
                             ng-attr-title = {{data.zpointStatusTitle}}>        

                        </a>
                        <a href="" class = "nmc-cw-widget-btn marginRight10"
                           ng-click = "openNotices()">
                            <img height = "30" width = "40" 
                                 ng-src = "{{widgetPath + '/notices.png'}}" 
                                 title = "Открыть уведомления"/>
                        </a>
                        <a href=""
                           class = "nmc-cw-widget-btn"
                           ng-click = "getIndicators()">        
                            <img height = "40" width = "40" 
                                 ng-src = "{{widgetPath + '/indicators.png'}}" 
                                 title = "Открыть показания"/>
                        </a>
-->
                    </div>
                    <div class = "col-xs-6 nmc-cw-widget-temppanel">                        
                    </div>
                </div>
            </div>
        </div>
        <div class = "row">
            <div class = "col-xs-12">
                Диаграмма событий по <span class = "text-primary">{{data.currentChartMode.chartCaption}}</span>
            </div>
        </div>
        <br>
        <div class="row">            
            <div class = "col-xs-4">
                <div ng-show = "presentDataFlag === false"
                     class = "nmc-text-align-center">                    
<!--                        <span class="glyphicon glyphicon-ban-circle"></span> Данные за указанный период не были загружены.-->
                </div>
                <div ng-show = "presentDataFlag === true">
                    <canvas id="doughnut" 
                            class="chart chart-doughnut" 
                            chart-data="barChart.data"
                            chart-labels="barChart.labels"                              
                            chart-options="barChart.options"
                            chart-click = "chartClick"
                            >
                    </canvas>
                </div>
            </div>
            <div class = "col-xs-1" ng-show = "presentDataFlag === true">
               <div ng-repeat = "chartMode in data.CHART_MODES" ng-click = "chartModeChange(chartMode)">
                   <p type = "button" ng-class = "chartMode.class"
                      ng-attr-title = "{{chartMode.caption}}" 
                   ></p>
               </div>
<!--                {{chartMode.caption}}-->
            </div>
            <div class = "col-xs-6">
                <h3>Список объектов</h3>
                <div style = "border: 1px #aaa solid; max-height: 300px; overflow: auto">                       
                    <div ng-repeat = "contObject in data.contObjectList track by $index">
                        {{contObject.contObjectId}}
                    </div>
                </div>    
            </div>            
        </div>
        <div class="row">            
            <div class = "col-xs-12">
                <div ng-attr-id = "{{'cw-chart-legend-' + data.ptreeNodeId}}" class = "cw-chart-legend"></div>
            </div>
        </div>
    </div>

    <!-- modal window -->
    <div id="objectListModal" class="modal fade nmc-modal-window" role="dialog"
        aria-labelledby="objectListModalLabel" tabindex="-1" data-backdrop="static">

        <div class="modal-dialog  modal-content">

            <div class="modal-header nmc-modal-header">
                <button type="button" 
                        class="close nmc-close-button" 
                        data-dismiss="modal" 
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h3 id="objectListModalLabel" 
                    class="nmc-h3">
                    Список объектов учета 
                </h3>
            </div>
            <div class="modal-body nmc-modal-body">                
                <div ng-repeat = "contObject in data.contObjectList track by $index">
                    {{contObject.contObjectId}}
                </div>                
            </div>
            <div class="modal-footer nmc-modal-footer">
                    <div class="container-fluid">

                        <div class="row">
    <!--
                            <div class="col-xs-offset-6 col-xs-3">
                                <input type="submit" 
                                       class="btn btn-xs btn-primary btn-block nmc-save-button"
                                    ng-click="deleteObject(currentObject);"
                                    value="Ок" />
                            </div>
    -->

                            <div class="pull-right col-xs-offset-2 col-xs-3 noPadding noMargin ">
                                <button class="btn btn-xs btn-default btn-block nmc-cancel-button" 
                                        data-dismiss="modal"
                                        ng-click="exit('#objectListModal');">
                                    ОК
                                </button>
                            </div>
                        </div>
                    </div>		
            </div>
        </div>
    </div>
</div>