<!--<div>Портал / Уведомления</div>-->
<!--
<div>
    <ul class="breadcrumb marginBottom10">
        <li><a href="#/">Портал</a> <span class="divider"></span></li>
        <li class="active">Уведомления</li>
    </ul>
</div>  
-->

<div role="tabpanel" class="nmc-main-tab-panel">

  <!-- Навигационная полоса -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation"><a class="nmc-main-tab-button" href="#/notices/monitor/" aria-controls="monitor" data-target="#monitor" role="tab" data-toggle="tab">Монитор</a></li>
        <li role="presentation" class="active"><a class="nmc-main-tab-button" href="" aria-controls="notices" role="tab" data-target="#notices" data-toggle="tab">Уведомления</a></li>

    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane fade in active" id="notices">
      </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row ">
        <div class="col-md-11 noPadding nmc-main-workspace-header">
            <h2 class="noMargin nmc-h2">Уведомления</h2>
        </div>
        <div class="col-md-1">
<!--            <i ng-disabled="notices.length==0" class="btn glyphicon glyphicon-stats nmc-button-in-header" ng-click="runChart()"></i>-->
        </div>  
    </div>    
    <div class="row">
        <div class="col-md-12 noPadding nmc-main-workspace-header">
            <hr>
        </div>
    </div>
</div>    
<div class="container-fluid">
<div class="row noPadding marginBottom10">    
<!--<div class="col-md-12 ">-->
<!--    <div class="col-md-12 noPadding">-->
<!--        <label class="nmc-form-label">Фильтры:</label>-->
<!--    </div>     -->
    <div class="col-md-1 nmc-div-filter-date-interval" ng-controller="DataRangeSettings" >   
        <div class="input-group">
            <span class="input-group-addon nmc-date-interval-form-addon" id="leftAddon">интервал дат: с</span>
            <input date-range-picker class="form-control date-picker nmc-date-interval-form nmc-input-data"
                type="text" ng-model="navPlayerDates" options="queryDateOptsRu" aria-describedby="leftAddon"/>
        </div>    
    </div>
    <div class="col-md-1 nmc-div-filter-object" >
<!--        <label class="nmc-form-label">объекты:</label>-->
        <div class="input-group nmc-input-data">
            <span class="input-group-addon nmc-date-interval-form-addon" id="leftAddon">объекты:</span>
            <input ng-init="selectedObjects_list='Нет'" id="inputObjects" type="text" class="form-control nmc-date-interval-form nmc-input-digital-data" ng-click="selectObjectsClick()" ng-model="selectedObjects_list" aria-describedby="rightAddon">
            <span class="input-group-addon nmc-input-form-suffix" id="rightAddon"><i class="btn btn-xs" ng-click="clearObjectFilter();getResultsPage(1)"><img height="19" width="19" src="images/clear-filter.jpg"/></i></span>    
        </div>
    </div>
    <div class="col-md-1 nmc-div-filter-type">
        <div class="input-group">
            <span class="input-group-addon nmc-date-interval-form-addon" id="leftAddon">типы:</span>
            <input ng-init="selectedNoticeTypes_list='Нет'" id="inputObjects" type="text" class="form-control nmc-date-interval-form nmc-input-data" ng-click="selectNoticeTypesClick()" ng-model="selectedNoticeTypes_list"  aria-describedby="rightAddon"> 
            
            <span class="input-group-addon nmc-input-form-suffix" id="rightAddon"><i class="btn btn-xs" ng-click="clearTypeFilter();getResultsPage(1)"><img height="19" width="19" src="images/clear-filter.jpg"/></i></span>    
        </div>
    </div>
<!--    <div class="col-md-1">-->
<!--        <span class="nmc-hide">-->
<!--            <input type="checkbox" class="nmc-checkbox-form"/>Критические-->
            
<!--        </span>-->
<!--    </div>-->
    <div class="col-md-1 noPadding nmc-div-filter-kind">
<!--       <span class="nmc-hide">     -->
<!--           <span class="marginRight5"></span><input title="Только новые уведомления" type="checkbox" class="nmc-checkbox-form-in-header"/> -->
        
            <div class="btn-group" ng-init="visibleText='Все уведомления'">
              <button type="button" class="btn btn-default btn-xs dropdown-toggle nmc-button-notice-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{visibleText}} <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                <li><a href="" ng-click="visibleText='Все уведомления';getAllNotices()">Все уведомления</a></li>
                <li><a href="" ng-click="visibleText='Только новые';getOnlyNewNotices()">Только новые</a></li>
              </ul>
            </div>
    </div>
    <div class="col-md-1 noPadding nmc-div-filter-remove">
           <button title="Сбросить все фильтры" class="btn btn-xs btn-primary nmc-button-notice-toggle" ng-click="clearAllFilters()">Сброс фильтров</button>
<!--        </span>-->
    </div>
<!--
    <div class="col-md-1">
    </div>
-->

    <div class="col-md-offset-1 col-md-3 noPadding">    
 
         <div class="col-md-7 noPadding">
            <label class="nmc-form-label">Записей на странице:</label>
    <!--         <input type="number" min="1" max="100" class="form-control inputDigitalData" ng-model="noticesPerPage">-->
            <select class="form-control nmc-select-form nmc-input-digital-data-sm" ng-model="noticesPerPage"    >
                        <option>15</option>
                        <option>25</option>
                        <option>50</option>
                        <option>75</option>
                        <option>100</option>
    <!--            <option>100</option>-->
            </select>
        </div>
        <div class="col-md-5 noPadding">
            <label class="nmc-form-label">Всего:</label>
             <input type="text" disabled class="form-control nmc-view-allcount nmc-inactive-form" ng-model="totalNotices">
        </div>
    </div>
<!--</div> -->
</div>
   
</div>

<div >
    <table class="nmc-table-nowrap-data nmc-main-table" ng-class="tableDef.tableClass">
        <tr ng-class="tableDef.headerClassTR">
            <th class="nmc-td-for-buttons">
                    <span class="paddingTop3">
                        <input type="checkbox" class="nmc-chekbox-form" ng-model="allSelected" ng-click="performAllNoticesOnPage()"/>
                    </span>    
                    <div class="btn-group">

                      <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li><a href="" ng-click="">Пометить выделенные как прочитанные</a></li>
                        <li><a href="" ng-click="">Пометить выделенные как непрочитанные</a></li>
                        <li role="separator" class="divider"></li> 
                        <li><a href="" ng-click="confirmationText='пометить все как прочитанные'" data-target="#confirmActionModal" data-toggle="modal">Пометить все как прочитанные</a></li>  
                        <li><a href="" ng-click="confirmationText='пометить все как непрочитанные'" data-target="#confirmActionModal" data-toggle="modal">Пометить все как непрочитанные</a></li>    
                      </ul>
                    </div>  
            </th>
            <th ng-repeat="column in tableDef.columns" ng-class="column.headerClass">
                {{column.header}}
            </th>       
        </tr>
        <tr dir-paginate="notice in notices | filter: noticefilter | itemsPerPage: noticesPerPage" total-items="totalNotices" current-page="pagination.current" ng-dblclick="showNoticeDetail(notice)">
            <td class="nmc-td-for-buttons"><span class="paddingLeft5"><input type="checkbox" class="nmc-chekbox-form" ng-model="notice.selected"/></span></td>
            <td ng-repeat="column in tableDef.columns" ng-class="column.dataClass || column.headerClass">
                <span ng-class="{'nmc-distinguish':notice.isNew, 'nmc-undistinguish':!notice.isNew}">{{notice[column.fieldName]}}</span>
            </td>
        </tr>
    </table>
    <div class="col-md-9">
        <dir-pagination-controls on-page-change="pageChanged(newPageNumber)" template-url="bower_components/angular-utils-pagination/dirPagination.tpl.html"></dir-pagination-controls>
    </div>
    <div class="col-md-3 noPadding">
             <div class="input-group nmc-search-form">
                <span class="input-group-addon nmc-search-form-addon"><i class="glyphicon glyphicon-search nmc-searh-form-button"></i></span>
                 <input type="text"  class="form-control nmc-text-input-form"  ng-model="noticefilter">
            </div>     
    </div> 
</div>

<!--Окно выбора объектов-->
<div id="selectObjectsModal" class="modal nmc-modal-window nmc-select-objects-window" role="dialog"
	aria-labelledby="selectObjectsLabel" tabindex="-1">

	<div class="modal-dialog nmc-modal-dialog">
<!--                modal-content">-->
    <div class="modal-content nmc-modal-narrow-dialog">
        <div class="modal-header well nmc-modal-footer noMarginBottom noMarginTop paddingTop5">
          <div class="row">
            <div class="col-md-9 noPadding paddingLeft10">
                <div class="input-group marginBottom10 nmc-search-form">
                    <span class="input-group-addon nmc-search-form-addon"><i class="glyphicon glyphicon-search nmc-searh-form-button"></i></span>
                     <input type="text"  class="form-control nmc-text-input-form"  ng-model="objectfilter">
                </div>
            </div>
            <div class="col-md-3">
                <input title="Применить фильтр" type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
                    ng-click="selectObjects();"
                    value="Ок" />
            </div>
          </div>
<!--
            <div class="input-group col-md-12 marginBottom10 nmc-search-form">
                <span class="input-group-addon nmc-search-form-addon"><i class="glyphicon glyphicon-search nmc-searh-form-button"></i></span>
                 <input type="text"  class="form-control nmc-text-input-form"  ng-model="objectfilter">
            </div>
-->
	
		</div>

<!--
		<div class="modal-header well nmc-modal-header noMarginBottom noPadding">
            
            
		</div>
-->
		<div class="modal-body well nmc-modal-body noMarginBottom noMarginTop paddingLeft5">
<!--            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->

<!--
            <div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-4 col-md-4 marginBottom10">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-save-button"
								ng-click="selectObjects();"
								value="Применить" />
						</div>
-->

<!--
						<div class="pull-right col-xs-offset-2 col-md-4 noPadding noMargin">
							<button class="btn btn-xs btn-default btn-block nmc-cancel-button" data-dismiss="modal"
								ng-click="exit('#selectObjectsModal');">
								Отменить
							</button>
						</div>
-->
<!--
					</div>
			</div>	
-->
            <div class="nmc-object-list nmc-modal-panel-with-table">
                <table class="table table-striped table-condensed table-hover nmc-modal-table-with-chkbx">
                    <tr ng-repeat="object in objectsInWindow | filter: objectfilter">
                        <td><input type="checkbox" ng-model="object.selected" class="nmc-checkbox-form">{{object.fullName}}
                        </td>    
                    </tr>    
                </table>
            </div>    
		</div>
<!--		<div class="modal-footer well nmc-modal-footer noMarginBottom noMarginTop paddingTop5">-->
<!--
            <input type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
                ng-click="selectObjects();"
                value="Ок" />
-->
<!--
				<div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-4 col-md-4">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-save-button"
								ng-click="selectObjects();"
								value="Применить" />
						</div>
-->

<!--
						<div class="pull-right col-xs-offset-2 col-md-4 noPadding noMargin">
							<button class="btn btn-xs btn-default btn-block nmc-cancel-button" data-dismiss="modal"
								ng-click="exit('#selectObjectsModal');">
								Отменить
							</button>
						</div>
-->
<!--
					</div>
				</div>		
-->
<!--		</div>-->

	</div>
        </div>
</div>

<!--Окно выбора типов уведомлений-->
<div id="selectNoticeTypesModal" class="modal nmc-modal-window nmc-select-objects-window nmc-select-notice-types-window" role="dialog"
	aria-labelledby="selectNoticeTypesLabel" tabindex="-1">

	<div class="modal-dialog nmc-modal-dialog">
    <div class="modal-content">
        <div class="modal-header well nmc-modal-footer noMarginBottom noMarginTop paddingTop5">
          <div class="row">
            <div class="col-md-10 noPadding paddingLeft10">
                <div class="input-group marginBottom10 nmc-search-form">
                    <span class="input-group-addon nmc-search-form-addon"><i class="glyphicon glyphicon-search nmc-searh-form-button"></i></span>
                     <input type="text"  class="form-control nmc-text-input-form"  ng-model="noticetypefilter">
                </div>
            </div>
            <div class="col-md-2">
                <input title="Применить фильтр" type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
                    ng-click="selectNoticeTypes();"
                    value="Ок" />
            </div>
          </div>      
		</div>

		<div class="modal-body well nmc-modal-body noMarginBottom noMarginTop paddingLeft5">
<!--            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
            
<!--
            <div class="row">
                <div class="col-xs-offset-4 col-md-4">
                    <input type="submit" class="btn btn-xs btn-primary btn-block nmc-save-button"
                        ng-click="selectNoticeTypes();"
                        value="Применить" />
                </div>

                <div class="pull-right col-xs-offset-2 col-md-4 noPadding noMargin">
                    <button class="btn btn-xs btn-default btn-block nmc-cancel-button" data-dismiss="modal"
                        ng-click="exit('#selectNoticeTypesModal');">
                        Отменить
                    </button>
                </div>
            </div>
-->
<!--
            <div class="row marginTopBottom5">
                <div class="col-xs-3"></div>
                <div class="col-xs-6 noPadding">
                    <p class="btn btn-xs nmc-button-in-modal">Выбрать все критические</p>
                </div>
                <div class="col-xs-3"></div>
            </div>    
-->

<!--
            <div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-4 col-md-4 marginBottom10">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-save-button"
								ng-click="selectNoticeTypes();"
								value="Применить" />
						</div>
-->

<!--
						<div class="pull-right col-xs-offset-2 col-md-4 noPadding noMargin">
							<button class="btn btn-xs btn-default btn-block nmc-cancel-button" data-dismiss="modal"
								ng-click="exit('#selectNoticeTypesModal');">
								Отменить
							</button>
						</div>
-->
<!--					</div>-->
<!--				</div>		-->
            <div class="nmc-object-list nmc-modal-panel-with-table">
                <table class="table table-striped table-condensed table-hover nmc-modal-table-with-chkbx">
                    <tr>
                        <td><input type="checkbox" ng-model="states.tempCriticalTypes_flag" class="nmc-checkbox-form" ng-click="selectAllCritical()">Критические
                        </td>
                    </tr>
                    <tr ng-repeat="noticeType in typesInWindow |filter: noticetypefilter | filter: noticeFilterCritical">
                        <td><span class="paddingLeft10"><input type="checkbox" ng-model="noticeType.selected" class="nmc-checkbox-form">{{noticeType.name}}</span>
                        </td>    
                    </tr>
                    
                    <tr>
                        <td><input type="checkbox" ng-model="states.tempNoCriticalTypes_flag" class="nmc-checkbox-form" ng-click="selectAllNoCritical()">Некритические
                        </td>
                    </tr>
                    <tr ng-repeat="noticeType in typesInWindow |filter: noticetypefilter | filter: noticeFilterNoCritical">
                        <td><span class="paddingLeft10"><input type="checkbox" ng-model="noticeType.selected" class="nmc-checkbox-form">{{noticeType.name}}</span>
                        </td>    
                    </tr>
                    
<!--
                    <tr>
                        <td><input type="checkbox" ng-model="states.tempUndefinedCriticalTypes_flag" class="nmc-checkbox-form" ng-click="selectAllUndefinedCritical()">Остальные
                        </td>
                    </tr>
-->
                    <tr ng-repeat="noticeType in typesInWindow |filter: noticetypefilter | filter: noticeFilterUndefinedCritical">
                        <td><span class="paddingLeft10"><input type="checkbox" ng-model="noticeType.selected" class="nmc-checkbox-form">{{noticeType.name}}</span>
                        </td>    
                    </tr>

                </table>
            </div>    
		</div>
<!--		<div class="modal-footer well nmc-modal-footer noMarginBottom noMarginTop paddingTop5">-->
<!--
            <input type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
                ng-click="selectNoticeTypes();"
                value="Ок" />
-->
<!--				<div class="container">-->

<!--					<div class="row">-->
<!--                        <div class="col-xs-offset-4 col-md-4">-->

<!--						</div>-->
<!--
						<div class="col-xs-offset-4 col-md-4">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-save-button"
								ng-click="selectNoticeTypes();"
								value="Применить" />
						</div>
-->

<!--
						<div class="pull-right col-xs-offset-2 col-md-4 noPadding noMargin">
							<button class="btn btn-xs btn-default btn-block nmc-cancel-button" data-dismiss="modal"
								ng-click="exit('#selectNoticeTypesModal');">
								Отменить
							</button>
						</div>
-->
<!--					</div>-->
<!--				</div>		-->
<!--		</div>-->

	</div>
        </div>
</div>


<!-- Карточка уведомления-->
<div id="showNoticeModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="showNoticeLabel" tabindex="-1">

	<div class="modal-dialog  modal-content nmc-modal-dialog">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="showNoticeLabel" class="nmc-h3">
				Уведомление 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 well noPaddingBottom marginBottom10 nmc-modal-panel-with-table" style="">
                        <table class="table table-lighter table-condensed table-hover noMarginBottom nmc-modal-main-table">
                            <tr>
                                <td class="col-sm-3"><label class="nmc-form-label" for="inputName">Тип</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeType}}
                                </td>
                            </tr>
                            <tr>
                                <td><label for="inputComment" class="nmc-form-label">Текст</label>
                                </td>
                                <td class="nmc-text-align-left">{{currentObject.noticeMessage}}

                                </td>
                            </tr>
                            <tr>
                                <td><label for="inputComment" class="nmc-form-label">Объект</label>
                                </td>
                                <td class="nmc-text-align-left">{{currentObject.noticeObjectName}}
                                </td>
                            </tr>
                            <tr>
                                <td class="col-sm-3"><label for="inputAddress" class="nmc-form-label">Дата</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeDate | date:'dd.MM.yyyy HH:mm:ss'}}
                                </td>
                            </tr>
                            <tr>
                                <td class="col-sm-3"><label for="inputAddress" class="nmc-form-label">Точка учета</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeZpoint}}
                                </td>
                            </tr>

                        </table>
                    </div>
                    </div> 
                </div> 

            </div>     
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">

					<div class="row">


						<div class="col-xs-offset-2 col-md-3 pull-right noPadding">
							<button class="btn btn-xs btn-default btn-primary btn-block nmc-ok-button" data-dismiss="modal"
								ng-click="exit('#currentObject');">
								Ок
							</button>
						</div>
					</div>
				</div>		
		</div>

	</div>
</div>

<!-- Окно с графиком-->
<div id="chartModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="chartLabel" tabindex="-1">

	<div class="modal-dialog  modal-content nmc-modal-some-wide-dialog nmc-modal-dialog">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="showNoticeLabel" class="nmc-h3">
				Диаграмма уведомлений 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
            <div id="noticeChart" class="paddingBottom40">
                <div id="noticeChart-area"></div>
		  </div>
        </div>     
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-offset-2 col-md-3 pull-right">
							<button class="btn btn-xs btn-default btn-primary btn-block nmc-ok-button" data-dismiss="modal"
								ng-click="exit();">
								Ок
							</button>
						</div>
					</div>
				</div>		
		</div>

	</div>
</div>

<!-- window: confirm action-->
<div id="confirmActionModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="confirmActionLabel" tabindex="-1">

	<div class="modal-dialog  modal-content nmc-modal-dialog-low">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="confirmActionLabel" class="nmc-h3">
				Подтверждение 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
			<form name="confirmActionForm" novalidate>
				<p>
					<label class="text-warning marginLeft15 nmc-form-label"> Вы действительно хотите   
					</label> 
					<label class="text-primary nmc-form-label">{{confirmationText}}</label>
					<label
						class="text-warning nmc-form-label"> ? </label>
				</p>
			</form>
		</div>
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-6 col-md-3">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
								ng-click="confirmAction(currentObject);"
								value="Ок" />
						</div>

						<div class="pull-right col-xs-offset-2 col-md-3 noMargin noPadding nmc-cancel-button">
							<button class="btn btn-xs btn-default btn-block" data-dismiss="modal"
								ng-click="exit('#deleteObject');">
								Отменить
							</button>
						</div>
					</div>
				</div>		
		</div>
		<span class="alert alert-error dialogErrorMessage"
			ng-show="errorOnSubmit"> Request error
		</span> <span class="alert alert-error dialogErrorMessage"
			ng-show="errorIllegalAccess"> Request illegal access
		</span>
	</div>
</div>