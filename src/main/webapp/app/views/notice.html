<!--<div>Портал / Уведомления</div>-->
<!--
<div>
    <ul class="breadcrumb marginBottom10">
        <li><a href="#/">Портал</a> <span class="divider"></span></li>
        <li class="active">Уведомления</li>
    </ul>
</div>  
-->
<div id="notice_page" class="nmc-hide">
<div role="tabpanel" class="nmc-main-tab-panel">

  <!-- Навигационная полоса -->
<!--
    <ul class="nav nav-tabs" role="tablist">
        <li id="monitor_2nd_menu_item" ng-hide="isTestMode()" role="presentation" class="nmc-hide"><a class="nmc-main-tab-button" href="#/notices/monitor/" aria-controls="monitor" data-target="#monitor" role="tab" data-toggle="tab">Монитор</a></li>
        <li id="notice_2nd_menu_item" role="presentation" class="active"><a class="nmc-main-tab-button" href="" aria-controls="notices2" role="tab" data-target="#notices2" data-toggle="tab">Уведомления</a></li>
        <li id="monitor_map_2nd_menu_item" ng-hide="isTestMode()" role="presentation" class="nmc-hide"><a class="nmc-main-tab-button" href="#/notices/monitor_map" aria-controls="monitor_map" role="tab" data-target="#monitor_map" data-toggle="tab">Карта</a></li>
    </ul>
-->
    <ul class="nav nav-tabs" role="tablist">
        <li id="object_list_2nd_menu_item" role="presentation" class="nmc-hide"><a id="monitorTab" class="nmc-main-tab-button" href="#/" aria-controls="objects" data-target="#objects" role="tab" data-toggle="tab">Список объектов</a></li>
        <li id="monitor_map_2nd_menu_item" ng-hide="isTestMode()" role="presentation" class="nmc-hide"><a class="nmc-main-tab-button" href="#/notices/monitor_map" aria-controls="monitor_map" role="tab" data-target="#monitor_map" data-toggle="tab">Карта</a></li>        
        <li id="notice_2nd_menu_item" role="presentation" class="active"><a class="nmc-main-tab-button" aria-controls="notices" role="tab" data-target="#notices" data-toggle="tab">Уведомления</a></li>        
        
        <li ng-if="isSystemuser()" id="object_map_2nd_menu_item" ng-hide="isTestMode()" role="presentation" class="nmc-hide">
            <a class="nmc-main-tab-button" 
               href="#/objects/demo-map/" 
               aria-controls="objects_map" 
               role="tab" 
               data-target="#objects_map" 
               data-toggle="tab"
               >
                Демо-карта
            </a>
        </li>

    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane fade in active" id="notices2">
      </div>
    </div>
</div>

<div class="container-fluid">
    <div class="row ">
        <div class="col-xs-11 col-md-11 noPadding nmc-main-workspace-header">
            <h2 class="noMargin nmc-h2">Уведомления</h2>
        </div>
        <div class="col-xs-1 col-md-1">
        </div>  
    </div>    
    <div class="row">
        <div class="col-xs-12 col-md-12 noPadding nmc-main-workspace-header">
            <hr>
        </div>
    </div>
</div>    
<div class="container-fluid noPadding">
<div class="row noPadding marginBottom10 nmc-filter-row">    
    <div class="col-xs-1 col-md-1 nmc-td-for-button">
        <button class="btn btn-default btn-xs glyphicon glyphicon-eject nmc-button-refresh"
                ng-class="{'gly-rotate-180':!isFiltersEx}"
           data-target="#filtersCollapse"
           data-toggle="collapse"
                aria-expanded="false"
                aria-controls="filtersCollapse"
                ng-click="isFiltersEx=!isFiltersEx"
                title="Фильтры">            
        </button>
    </div>
    <div class="col-xs-2 col-md-2" ng-controller="DataRangeSettings" >   
        <div class="input-group">
            <span class="input-group-addon nmc-date-interval-form-addon" id="leftAddon"
                  ng-disabled="isDisabledFilters()">период: с</span>
            <input date-range-picker class="form-control date-picker nmc-date-interval-form nmc-input-data"
                type="text" ng-model="navPlayerDates" options="queryDateOptsRu" aria-describedby="leftAddon"
                   ng-disabled="isDisabledFilters()"/>
        </div>    
    </div>
    <div class="col-xs-1 col-md-1 noPadding nmc-div-filter-kind">
            <div class="btn-group" 
                 ng-init="visibleText='Все уведомления'">
              <button type="button" 
                      class="btn btn-default btn-xs dropdown-toggle nmc-button-notice-toggle" 
                      data-toggle="dropdown" 
                      aria-haspopup="true" 
                      aria-expanded="false"
                      ng-disabled="isDisabledFilters()">
                {{visibleText}} <span class="caret"></span>
              </button>
              <ul class="dropdown-menu">
                <li><a href="" ng-click="visibleText='Все уведомления';getAllNotices()">Все уведомления</a></li>
                <li><a href="" ng-click="visibleText='Только новые';getOnlyNewNotices()">Только новые</a></li>
              </ul>
            </div>
    </div>
    <div class="col-xs-1 col-md-1 noPadding nmc-div-filter-remove">
           <button title="Сбросить все фильтры" 
                   class="btn btn-xs btn-primary nmc-button-notice-toggle" 
                   ng-click="clearAllFilters()"
                   ng-disabled="isDisabledFilters()">Сброс фильтров</button>
    </div>
    <div class="col-xs-1 col-md-1 noPadding nmc-div-refresh">
        <button title="Обновить" 
                class="btn btn-default btn-xs glyphicon glyphicon-refresh nmc-button-refresh" 
                ng-click="getResultsPage(1)"
                ng-disabled="isDisabledFilters()">
        </button>
    </div>

    <div class="col-xs-5 col-md-4 noPadding nmc-div-page-legend">    
 
         <div class="col-xs-7 col-md-7 noPadding">
            <label class="nmc-form-label">Записей на странице:</label>
    <!--         <input type="number" min="1" max="100" class="form-control inputDigitalData" ng-model="noticesPerPage">-->
            <select class="form-control nmc-select-form nmc-view-allcount" ng-model="noticesPerPage"    
                    ng-disabled="isDisabledFilters()">
                        <option>15</option>
                        <option>25</option>
                        <option>50</option>
                        <option>75</option>
                        <option>100</option>
    <!--            <option>100</option>-->
            </select>
        </div>
        <div class="col-xs-5 col-md-5 noPadding">
            <label class="nmc-form-label">Всего:</label>
             <input type="text" disabled class="form-control nmc-view-allcount nmc-inactive-form" ng-model="totalNotices">
        </div>
    </div>
<!--</div> -->
</div>
<div class="collapse" id="filtersCollapse">
  <div class="row marginBottom5">
            <div class="col-xs-2 col-md-2" >
        <!--        <label class="nmc-form-label">объекты:</label>-->
                <div class="input-group nmc-input-data">
                    <div style="display: table-cell;">
                        <input id="object-toggle-view" 
                               ng-model="ctrlSettings.showObjectsFlag" 
                               data-toggle="toggle"
                               data-on="Объекты" 
                               data-off="Группы" 
                               data-size="mini"
                               data-width="100"
                               data-height="26"
                               type="checkbox" 
                               class="" 
                               style=""
                               checked
                               ng-disabled="isDisabledFilters()"
                               />
                    </div>
                    <div class="btn-group">
                        <button ng-disabled="isDisabledFilters()"
                                data-toggle="dropdown" 
                                class="btn btn-default nmc-filter-form nmc-input-digital-data dropdown-toggle nmc-dropdown-toggle-filter"
                                ng-click="selectObjectsClick()"
                                data-placeholder="false"
                                ng-class="{'paddingLeft20': selectedObjects_list.caption != messages.defaultFilterCaption}"> 
                            {{selectedObjects_list.caption}}
                            <i ng-if="selectedObjects_list.caption != messages.defaultFilterCaption" 
                               class="">                                
                                <strong>...</strong>
                            </i>
                        </button>
                        <ul class="dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5 marginBottom5">
                                <div class="container-fluid noPadding">
                                <div class="row">
                                    <div class="col-xs-8 col-md-8">
                                        <div class="input-group nmc-input-group-filter">
                                          <span class="input-group-addon nmc-search-form-addon" 
                                                id="objectFilter-addon">
                                              <i class="glyphicon glyphicon-search nmc-searh-form-button">
                                              </i>
                                          </span>
                                          <input class="form-control nmc-text-input-notice-filter-form" 
                                                 type="text"
                                                 aria-describedly="objectFilter-addon"
                                                 ng-model="objectFilter"
                                             />
                                        </div>                              
                                    </div>
                                    <div class="col-xs-1 col-md-1 nmc-vdivide"></div>
                                    <div class="col-xs-2 col-md-2">
                                        <p title="Применить фильтр" 
                                                type="submit" 
                                                class="btn btn-xs btn-primary nmc-ok-button-in-filter pull-right marginRight5" 
                                                ng-click="selectObjects();"
                                                value="Ок" 
                                                style=""
                                                ng-disabled="isFilterApplyDisabled(objectsInWindow, states.isSelectedAllObjectsInWindow)"
                                           ng-class="{'nmc-ok-button-highlight': states.isSelectElement&&!isFilterApplyDisabled(objectsInWindow, states.isSelectedAllObjectsInWindow)}"
                                           >
                                            OK
                                            <i class="glyphicon glyphicon-filter">
                                            </i>
                                        </p>
                                    </div>
                                </div>
                                </div>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li class="paddingLeft5 nmc-li-select-all"                                   
                                 >
                                <input type="checkbox" 
                                      ng-attr-id={{"idObjectsAll"}} 
                                      ng-attr-name={{"idObjectsAll"}} 
                                      ng-attr-value={{"allObjects"}} 
                                      ng-model="states.isSelectedAllObjectsInWindow"
                                      class="nmc-checkbox-dropdown"
                                      ng-click="selectAllElements(objectsInWindow)" 
                                      />
                               <label ng-attr-for={{"idObjectsAll"}}
                                      class="nmc-label-dropdown"                                      
                                      >
                                  Выбрать все
                               </label>
                            </li>
                            <li role="separator" class="divider"></li> 
                        </ul>
                        <ul class=" dropdown-menu nmc-filter-list-items nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5" ng-repeat="object in objectsInWindow | filter: objectFilter">
                                <input type="checkbox" 
                                       ng-attr-id={{"idObj"+object.id}} 
                                       ng-attr-name={{"idObj"+object.name}} 
                                       ng-attr-value={{object.name}} 
                                       ng-model="object.selected"
                                       class="nmc-checkbox-dropdown"
                                       ng-click="selectElement('isSelectedAllObjectsInWindow')"
                                       />
                               <label ng-attr-for={{"idObj"+object.id}}
                                      class="nmc-label-dropdown"                                      
                                      >
                                  {{object.contGroupName || object.fullName}}
                               </label>
                            </li>                            
                        </ul>
                    </div>
                    <span class="input-group-addon nmc-input-form-suffix" 
                          id="rightAddon">
                        <i title="Очистить фильтр" 
                           class="btn btn-xs nmc-button-clear-filter" 
                           ng-click="clearObjectFilter();getResultsPage(1)"
                           ng-disabled="selectedObjects_list.caption == messages.defaultFilterCaption">
                            <img height="19" width="19" 
                                 src="images/clear-filter.png"
                                 class="nmc-img-clear-filter"/>
                        </i>
                    </span>    
                </div>
            </div>
            <div class="col-xs-2 col-md-2" >
        <!--        <label class="nmc-form-label">Категории:</label>-->
                <div class="input-group nmc-input-data">
                    <span class="input-group-addon nmc-filter-form-addon" 
                          id="leftAddon" 
                          >Категории:
                    </span>
                    <div class="btn-group">
                        <button ng-disabled="isDisabledFilters()" 
                                data-toggle="dropdown" 
                                class="btn btn-default nmc-filter-form nmc-input-digital-data dropdown-toggle nmc-dropdown-toggle-filter"
                                ng-click="selectNoticeCategoriesClick()"
                                data-placeholder="false"
                                ng-class="{'paddingLeft20': selectedNoticeCategories_list.caption != messages.defaultFilterCaption}"> 
                            {{selectedNoticeCategories_list.caption}}
                            <i ng-if="selectedNoticeCategories_list.caption != messages.defaultFilterCaption" 
                               class=""><strong>...</strong></i>
                        </button>
                        <ul class="dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5 marginBottom5">
                                <div class="container-fluid noPadding">
                                <div class="row">
                                    <div class="col-xs-8 col-md-8">
                                      <div class="input-group nmc-input-group-filter">
                                          <span class="input-group-addon nmc-search-form-addon" 
                                                id="categoryFilter-addon">
                                              <i class="glyphicon glyphicon-search nmc-searh-form-button">
                                              </i>
                                          </span>
                                          <input class="form-control nmc-text-input-notice-filter-form" 
                                                 type="text" 
                                                 ng-model="categoryFilter"
                                                 aria-describedly="categoryFilter-addon"
                                                 />
                                        </div>
                                    </div>
                                    <div class="col-xs-1 col-md-1 nmc-vdivide"></div>
                                    <div class="col-xs-2 col-md-2">
                                        <p title="Применить фильтр" 
                                                type="submit" 
                                                class="btn btn-xs btn-primary nmc-ok-button-in-filter pull-right marginRight5" 
                                                ng-click="selectNoticeCategories()"
                                                value="Ок" 
                                                style=""
                                                ng-disabled="isFilterApplyDisabled(categoriesInWindow, states.isSelectedAllCategoriesInWindow)"
                                           ng-class="{'nmc-ok-button-highlight': states.isSelectElement&&!isFilterApplyDisabled(categoriesInWindow, states.isSelectedAllCategoriesInWindow)}">
                                            OK
                                            <i class="glyphicon glyphicon-filter">
                                            </i>
                                        </p>
                                    </div>
                                </div>
                                </div>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li class="paddingLeft5 nmc-li-select-all"                                   
                                 >
                                <input type="checkbox" 
                                      ng-attr-id={{"idCategoriesAll"}} 
                                      ng-attr-name={{"idCategoriesAll"}} 
                                      ng-attr-value={{"allCategories"}} 
                                      ng-model="states.isSelectedAllCategoriesInWindow"
                                      class="nmc-checkbox-dropdown"
                                    ng-click="selectAllElements(categoriesInWindow)"
                                      />
                               <label ng-attr-for={{"idCategoriesAll"}}
                                      class="nmc-label-dropdown"
                                      >
                                  Выбрать все
                               </label>
                            </li>
                            <li role="separator" class="divider"></li>
                        </ul>
                        <ul class="nmc-filter-list-items dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5" ng-repeat="category in categoriesInWindow | filter: categoryFilter">
                                <input type="checkbox" 
                                       ng-attr-id={{"idCategory"+category.keyname}} 
                                       ng-attr-name={{"nameCategory"+category.keyname}} 
                                       ng-attr-value={{category.keyname}} 
                                       ng-model="category.selected"
                                       class="nmc-checkbox-dropdown"
                                       ng-click="selectElement('isSelectedAllCategoriesInWindow')"
                                       />
                               <label ng-attr-for={{"idCategory"+category.keyname}}
                                      class="nmc-label-dropdown">
                                  {{category.caption || category.keyname}}
                               </label>
                            </li>
                        </ul>
                    </div>
                    <span class="input-group-addon nmc-input-form-suffix" 
                          id="rightAddon">
                        <i title="Очистить фильтр" 
                           class="btn btn-xs nmc-button-clear-filter" 
                           ng-click="clearCategoryFilter();getResultsPage(1)"
                           ng-disabled="selectedNoticeCategories_list.caption == messages.defaultFilterCaption">
                            <img height="19" width="19" 
                                 src="images/clear-filter.png"
                                 class="nmc-img-clear-filter"/>
                        </i>
                    </span>    
                </div>
            </div>
            <div class="col-xs-2 col-md-2" >
        <!--        <label class="nmc-form-label">Типы:</label>-->
                <div class="input-group nmc-input-data">
                    <span class="input-group-addon nmc-filter-form-addon" 
                          id="leftAddon" 
                          >Типы:
                    </span>
                    <div class="btn-group">
                        <button ng-disabled="isDisabledFilters()"
                                data-toggle="dropdown" 
                                class="btn btn-default nmc-filter-form nmc-input-digital-data dropdown-toggle nmc-dropdown-toggle-filter"
                                ng-click="selectNoticeTypesClick()"
                                data-placeholder="false"
                                ng-class="{'paddingLeft20': selectedNoticeTypes_list.caption != messages.defaultFilterCaption}"> 
                            {{selectedNoticeTypes_list.caption}}
                            <i ng-if="selectedNoticeTypes_list.caption != messages.defaultFilterCaption" 
                               class=""><strong>...</strong></i>
                        </button>
                        <ul class="dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5 marginBottom5">
                                <div class="container-fluid noPadding">
                                  <div class="row">
                                    <div class="col-xs-8 col-md-8">
                                      <div class="input-group nmc-input-group-filter">
                                          <span class="input-group-addon nmc-search-form-addon" 
                                                id="typeFilter-addon">
                                              <i class="glyphicon glyphicon-search nmc-searh-form-button">
                                              </i>
                                          </span>
                                          <input class="form-control nmc-text-input-notice-filter-form" 
                                                 type="text" 
                                                 ng-model="typeFilter"
                                                 aria-describedly="typeFilter-addon"
                                                 />
                                        </div>
                                    </div>
                                    <div class="col-xs-1 col-md-1 nmc-vdivide"></div>
                                    <div class="col-xs-2 col-md-2">
                                        <p title="Применить фильтр" 
                                                type="submit" 
                                                class="btn btn-xs btn-primary nmc-ok-button-in-filter pull-right marginRight5" 
                                                ng-click="selectNoticeTypes()"
                                                value="Ок" 
                                                style=""
                                                ng-disabled="isFilterApplyDisabled(typesInWindow, states.isSelectedAllTypesInWindow)"
                                           ng-class="{'nmc-ok-button-highlight': states.isSelectElement&&!isFilterApplyDisabled(typesInWindow, states.isSelectedAllTypesInWindow)}">
                                            OK
                                            <i class="glyphicon glyphicon-filter">
                                            </i>
                                        </p>
                                    </div>
                                  </div>
                                </div>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li class="paddingLeft5 nmc-li-select-all"                                   
                                 >
                                <input type="checkbox" 
                                      ng-attr-id={{"idTypesAll"}} 
                                      ng-attr-name={{"idTypesAll"}} 
                                      ng-attr-value={{"allTypes"}} 
                                      ng-model="states.isSelectedAllTypesInWindow"
                                      class="nmc-checkbox-dropdown"
                                       ng-click="selectAllElements(typesInWindow)"
                                      />
                               <label ng-attr-for={{"idTypesAll"}}
                                      class="nmc-label-dropdown"
                                      >
                                  Выбрать все
                               </label>
                            </li>
                            <li role="separator" class="divider"></li>
                        </ul>
                        <ul class="nmc-filter-list-items dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5" ng-repeat="type in typesInWindow | filterByCategories: selectedCategories | filter: typeFilter">
                                <input type="checkbox" 
                                       ng-attr-id={{"idType"+type.id}} 
                                       ng-attr-name={{"idType"+type.name}} 
                                       ng-attr-value={{type.name}} 
                                       ng-model="type.selected"
                                       class="nmc-checkbox-dropdown"
                                       ng-click="selectElement('isSelectedAllTypesInWindow')"
                                       />
                               <label ng-attr-for={{"idType"+type.id}}
                                      class="nmc-label-dropdown">
                                  {{type.name || type.id}}
                               </label>
                            </li>
                        </ul>
                    </div>
                    <span class="input-group-addon nmc-input-form-suffix" 
                          id="rightAddon">
                        <i title="Очистить фильтр" 
                           class="btn btn-xs nmc-button-clear-filter" 
                           ng-click="clearTypeFilter();getResultsPage(1)"
                           ng-disabled="selectedNoticeTypes_list.caption == messages.defaultFilterCaption">
                            <img height="19" width="19" 
                                 src="images/clear-filter.png"
                                 class="nmc-img-clear-filter"/>
                        </i>
                    </span>    
                </div>
            </div> 
            <div class="col-xs-2 col-md-2" >
        <!--        <label class="nmc-form-label">Отклонения:</label>-->
                <div class="input-group nmc-input-data">
                    <span class="input-group-addon nmc-filter-form-addon" 
                          id="leftAddon" 
                          >Отклонения:
                    </span>
                    <div class="btn-group">
                        <button  ng-disabled="isDisabledFilters()"
                                data-toggle="dropdown" 
                                class="btn btn-default nmc-filter-form nmc-input-digital-data dropdown-toggle nmc-dropdown-toggle-filter"
                                ng-click="selectNoticeDeviationsClick()"
                                data-placeholder="false"
                                ng-class="{'paddingLeft20': selectedNoticeDeviations_list.caption != messages.defaultFilterCaption}"> 
                            {{selectedNoticeDeviations_list.caption}}
                            <i ng-if="selectedNoticeDeviations_list.caption != messages.defaultFilterCaption" 
                               class=""><strong>...</strong></i>
                        </button>
                        <ul class="dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5 marginBottom5">
                                <div class="container-fluid noPadding">
                                  <div class="row">
                                    <div class="col-xs-8 col-md-8">
                                      <div class="input-group nmc-input-group-filter">
                                          <span class="input-group-addon nmc-search-form-addon" 
                                                id="deviationFilter-addon">
                                              <i class="glyphicon glyphicon-search nmc-searh-form-button">
                                              </i>
                                          </span>
                                          <input class="form-control nmc-text-input-notice-filter-form" 
                                                 type="text" 
                                                 ng-model="deviationFilter"
                                                 aria-describedly="deviationFilter-addon"
                                                 />
                                        </div>
                                    </div>
                                    <div class="col-xs-1 col-md-1 nmc-vdivide"></div>
                                    <div class="col-xs-2 col-md-2">
                                        <p title="Применить фильтр" 
                                                type="submit" 
                                                class="btn btn-xs btn-primary nmc-ok-button-in-filter pull-right marginRight5" 
                                                ng-click="selectNoticeDeviations()"
                                                value="Ок" 
                                                style=""
                                                ng-disabled="isFilterApplyDisabled(deviationsInWindow, states.isSelectedAllDeviationsInWindow)"
                                           ng-class="{'nmc-ok-button-highlight': states.isSelectElement && !isFilterApplyDisabled(deviationsInWindow, states.isSelectedAllDeviationsInWindow)}">
                                            OK
                                            <i class="glyphicon glyphicon-filter">
                                            </i>
                                        </p>
                                     </div>
                                  </div>
                                </div>
                            </li>
                            <li role="separator" class="divider"></li>
                            <li class="paddingLeft5 nmc-li-select-all"                                  
                                 >
                                <input type="checkbox" 
                                      ng-attr-id={{"idDeviationsAll"}} 
                                      ng-attr-name={{"nameDeviationsAll"}} 
                                      ng-attr-value={{"allDeviations"}} 
                                      ng-model="states.isSelectedAllDeviationsInWindow"
                                      class="nmc-checkbox-dropdown"
                                    ng-click="selectAllElements(deviationsInWindow)"
                                      />
                               <label ng-attr-for={{"idDeviationsAll"}}
                                      class="nmc-label-dropdown"
                                      >
                                  Выбрать все
                               </label>
                            </li>
                            <li role="separator" class="divider"></li>
                        </ul>
                        <ul class="nmc-filter-list-items dropdown-menu nmc-dropdown-menu-filter noclose">
                            <li class="paddingLeft5" ng-repeat="deviation in deviationsInWindow | filter: deviationFilter">
                                <input type="checkbox" 
                                       ng-attr-id={{"idDeviation"+deviation.keyname}} 
                                       ng-attr-name={{"nameDeviation"+deviation.keyname}} 
                                       ng-attr-value={{deviation.keyname}} 
                                       ng-model="deviation.selected"
                                       class="nmc-checkbox-dropdown"
                                       ng-click="selectElement('isSelectedAllDeviationsInWindow')"/>
                               <label ng-attr-for={{"idDeviation"+deviation.keyname}}
                                      class="nmc-label-dropdown">
                                  {{deviation.caption || deviation.keyname}}
                               </label>
                            </li>
                        </ul>
                    </div>
                    <span class="input-group-addon nmc-input-form-suffix" 
                          id="rightAddon">
                        <i title="Очистить фильтр" 
                           class="btn btn-xs nmc-button-clear-filter" 
                           ng-click="clearDeviationFilter();getResultsPage(1)"
                           ng-disabled="selectedNoticeDeviations_list.caption == messages.defaultFilterCaption">
                            <img height="19" width="19" 
                                 src="images/clear-filter.png"
                                 class="nmc-img-clear-filter"/>
                        </i>
                    </span>    
                </div>
            </div> 

  </div>
</div>    
   
</div>

<div >
<!--    Непрокручиваемая шапка-->
    <table ng-show="!ctrlSettings.loading"
           class="nmc-table-nowrap-data nmc-main-table noMargin" 
           ng-class="tableDef.tableClass">
        <tr ng-class="tableDef.headerClassTR">
            <th class="nmc-td-for-buttons nmc-notice-th">
                    <span class="paddingTop3">
                        <input title="Выделить/снять выделение со всех уведомлений на странице" 
                               type="checkbox" 
                               class="nmc-chekbox-form" 
                               ng-model="allSelected" 
                               ng-click="performAllNoticesOnPage()"/>
                    </span>    
                    <div class="btn-group">

                      <button title="Действия над уведомлениями" 
                              type="button" 
                              class="btn btn-default btn-xs dropdown-toggle nmc-dropdown-toggle-notices" 
                              data-toggle="dropdown" 
                              aria-haspopup="true" 
                              aria-expanded="false" 
                              
                              >
                        <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li>
                            <a href="" 
                               ng-click="revisionNotices(false)">{{messages.markSelectedAsRevision}}
                            </a>
                        </li>
                        <li>
                            <a href="" 
                               ng-click="revisionNotices(true)">{{messages.markSelectedAsNew}}
                            </a>
                        </li>
                        <li role="separator" 
                            class="divider">
                        </li> 
                        <li>
                            <a href="" 
                               ng-click="confirmationText=messages.markOnPageAsRevision" 
                               data-target="#confirmActionModal" 
                               data-toggle="modal">{{messages.markOnPageAsRevision}}
                            </a>
                        </li> 
                        <li>
                            <a href="" 
                               ng-click="confirmationText=messages.markAllAsRevision" 
                               data-target="#confirmActionModal" 
                               data-toggle="modal">{{messages.markAllAsRevision}}
                            </a>
                        </li>  
                      </ul>
                    </div>  
            </th>
            <th class="nmc-notice-th" ng-repeat="column in tableDef.columns" ng-class="column.headerClass">
                {{column.header}}
            </th>       
        </tr>
    </table>
<!--    конец шапки-->
    <div  ng-show="ctrlSettings.loading" class="nmc-loading">
        <i class="fa fa-spinner fa-spin"></i> Загрузка ... 
    </div>
    <div  ng-show="!ctrlSettings.loading && notices.length == 0" class="nmc-loading">
        Нет уведомлений. 
    </div>
    
    <div class="nmc-notice-table-with-fixed-header" ng-show="!ctrlSettings.loading && notices.length > 0">
        <table class="nmc-table-nowrap-data nmc-main-table table-bordered" ng-class="tableDef.tableClass">
            <tr dir-paginate="notice in notices | filter: noticefilter | itemsPerPage: noticesPerPage" total-items="totalNotices" current-page="pagination.current" ng-dblclick="showNoticeDetail(notice)">
    <!--            ng-class="{'nmc-tr-positive-notice':!notice.isBaseEvent}">-->
                <td class="nmc-td-for-buttons">
                    <span class="paddingLeft5">
                        <input type="checkbox" class="nmc-chekbox-form" ng-model="notice.selected"/>
                    </span>                    
                    <img ng-class="notice.imgclass" ng-src="{{notice.imgpath}}"/>    
                    <a class="" 
                       ng-hide="notice.noticeObjectName==undefined" 
                       ng-href="#/objects/indicators/?objectId={{notice.contObjectId}}&zpointId={{notice.zpoint.contZPointId}}&fromDate={{startDate}}&toDate={{endDate}}&timeDetailType=1h&objectName={{notice.noticeObjectName}}&zpointName={{notice.noticeZpoint}}" target="_blank">
                        <i title="Открыть показания" class="btn btn-xs glyphicon glyphicon-list"></i>
                    </a>
                    
                </td>
                <td ng-repeat="column in tableDef.columns" ng-class="column.dataClass || column.headerClass">
                    <span class="nmc-link-notice-detail" href="" ng-click="showNoticeDetail(notice)">
                        <span ng-if="column.fieldName==='noticeZpoint'"><img width="12" height="12" ng-src="{{notice.imgSTPath}}"></span>
                        <span ng-class="{'nmc-distinguish':notice.isNew, 'nmc-undistinguish':!notice.isNew, 'nmc-positive-notice':!notice.isBaseEvent}">{{notice[column.fieldName]}}</span>
                    </span>    
                </td>
            </tr>
        </table>
    </div>
    <div ng-show="!ctrlSettings.loading && notices.length > 0" class="col-md-9 marginTop5">
        <dir-pagination-controls on-page-change="pageChanged(newPageNumber)" template-url="/public/bower_components/angular-utils-pagination/nmcDirPagination.tpl.html"></dir-pagination-controls>
    </div>
    <div ng-show="!ctrlSettings.loading && notices.length > 0" class="col-md-3 marginTop5 noPadding">
             <div class="input-group nmc-search-form">
                <span class="input-group-addon nmc-search-form-addon"><i class="glyphicon glyphicon-search nmc-searh-form-button"></i></span>
                 <input type="text"  class="form-control nmc-text-input-form"  ng-model="noticefilter">
            </div>     
    </div> 
</div>

<!-- Карточка уведомления-->
<div id="showNoticeModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="showNoticeLabel" tabindex="-1">

	<div class="modal-dialog  modal-content nmc-modal-dialog">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="showNoticeLabel" class="nmc-h3">
                Уведомление <span ng-if="isSystemuser()"> {{currentObject.contEventCategoryKeyname}}</span>
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 well noPaddingBottom marginBottom10 nmc-modal-panel-with-table" style="">
                        <table class="table table-lighter table-condensed table-hover noMarginBottom nmc-modal-main-table">
                            <tr>
                                <td class="col-sm-3"><label class="nmc-form-label" for="inputName">Тип</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeType}}
                                </td>
                            </tr>
                            <tr>
                                <td><label for="inputComment" class="nmc-form-label">Текст</label>
                                </td>
                                <td class="nmc-text-align-left">{{currentObject.noticeMessage}}

                                </td>
                            </tr>
                            <tr>
                                <td><label for="inputComment" class="nmc-form-label">Объект</label>
                                </td>
                                <td class="nmc-text-align-left">{{currentObject.noticeObjectName}}
                                </td>
                            </tr>
                            <tr>
                                <td class="col-sm-3"><label for="inputAddress" class="nmc-form-label">Дата</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeDate | date:'dd.MM.yyyy HH:mm:ss'}}
                                </td>
                            </tr>
                            <tr>
                                <td class="col-sm-3"><label for="inputAddress" class="nmc-form-label">Точка учета</label>
                                </td>
                                <td class="col-sm-9 nmc-text-align-left">{{currentObject.noticeZpoint}}
                                </td>
                            </tr>

                        </table>
                    </div>
                    </div> 
                </div> 

            </div>     
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">

					<div class="row">


						<div class="col-xs-offset-2 col-md-3 pull-right noPadding">
							<button class="btn btn-xs btn-default btn-primary btn-block nmc-ok-button" data-dismiss="modal"
								ng-click="exit('#currentObject');">
								Ок
							</button>
						</div>
					</div>
				</div>		
		</div>

	</div>
</div>

<!-- Окно с графиком-->
<div id="chartModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="chartLabel" tabindex="-1" data-backdrop="static">

	<div class="modal-dialog  modal-content nmc-modal-some-wide-dialog nmc-modal-dialog">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="showNoticeLabel" class="nmc-h3">
				Диаграмма уведомлений 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
            <div id="noticeChart" class="paddingBottom40">
                <div id="noticeChart-area"></div>
		  </div>
        </div>     
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">
					<div class="row">
						<div class="col-xs-offset-2 col-md-3 pull-right">
							<button class="btn btn-xs btn-default btn-primary btn-block nmc-ok-button" data-dismiss="modal"
								ng-click="exit();">
								Ок
							</button>
						</div>
					</div>
				</div>		
		</div>

	</div>
</div>

<!-- window: confirm action-->
<div id="confirmActionModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="confirmActionLabel" tabindex="-1" data-backdrop="static">

	<div class="modal-dialog  modal-content nmc-modal-dialog-low">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="confirmActionLabel" class="nmc-h3">
				Подтверждение 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body">
			<form name="confirmActionForm" novalidate>
				<p>
					<label class="text-warning marginLeft15 nmc-form-label"> Вы действительно хотите   
					</label> 
					<label class="text-primary nmc-form-label">{{confirmationText}}</label>
					<label
						class="text-warning nmc-form-label"> ? </label>
				</p>
			</form>
		</div>
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-6 col-md-3">
							<input type="submit" class="btn btn-xs btn-primary btn-block nmc-ok-button"
								ng-click="confirmAction();"
								value="Ок" />
						</div>

						<div class="pull-right col-xs-offset-2 col-md-3 noMargin noPadding nmc-cancel-button">
							<button class="btn btn-xs btn-default btn-block" data-dismiss="modal"
								ng-click="exit('#confirmActionModal');">
								Отменить
							</button>
						</div>
					</div>
				</div>		
		</div>
		<span class="alert alert-error dialogErrorMessage"
			ng-show="errorOnSubmit"> Request error
		</span> <span class="alert alert-error dialogErrorMessage"
			ng-show="errorIllegalAccess"> Request illegal access
		</span>
	</div>
</div>
</div>    