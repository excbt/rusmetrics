<!--<div>Портал / Отчеты</div>-->
<!--
<div>
    <ul class="breadcrumb marginBottom10">
        <li><a href="#/">Портал</a> <span class="divider"></span></li>
        <li class="active">Отчеты</li>
    </ul>
</div> 
-->
<div id="report_list_view_page">
<div class="nmc-main-workspace-header">
    <h2 class="noMargin nmc-h2">Отчеты</h2>
    <hr>
</div>
<!-- Навигационная полоса по категориям отчетов-->
<div role="tabpanel" class="nmc-main-tab-panel" ng-init="curCategory=categories[0]">    
                <ul class="nav nav-tabs marginBottom5" role="tablist">
                    <li ng-repeat="category in categories" role="presentation" ng-class="category.class">
                        <a 
                           class="nmc-main-tab-button" 
                           href="" 
                           aria-controls="rep_teplo_reports" 
                           data-target="#rep_teplo_reports" 
                           role="tab" 
                           data-toggle="tab"
                           ng-click="selectedCategory(category)"> 
                            {{category.caption}} 
                        </a>
                    </li>
                    <div class="col-xs-3 col-md-3">
                        <select class="form-control nmc-input-data-energy-types nmc-select-form" ng-model="currentResourceCategory" ng-options="resCategory as resCategory.caption for resCategory in resourceCategories track by resCategory.name">
                            </select>
                    </div>
                </ul>
    <div class="tab-content">
                    <div role="tabpanel" 
                         class="tab-pane fade in active nmc-report-main-div" 
                         id="rep_teplo_reports">

<div class="nmc-report-main-div_close">
    <table id="datatabl" class="table  table-condensed noMarginBottom nmc-table-container">
                <!--  Постороение таблицы с данными  -->
                    <tr ng-repeat="object in curCategory.reportTypes | resourceCategoryFilter: currentResourceCategory" ng-click="" ng-dblclick="">
<!--                        <td style="padding:0;">-->
                            <td>
                            <table class="crud-grid table table-lighter table-striped table-condensed table-hover noMarginBottom nmc-parent-table"> 
                                <tr ng-class="{'nmc-tr-odd':($index%2===0)}">
                                    <td ng-class="column.class" style="padding:0;">
                                        <div class="btn-toolbar col-xs-1 col-md-1 nmc-btn-toolbar-in-table">
                                            <i title="Раскрыть/скрыть список вариантов отчетов" 
                                               class="btn btn-xs glyphicon noMargin nmc-button-in-table" 
                                               ng-class="{'glyphicon-chevron-down': object.showGroupDetails, 'glyphicon-chevron-right': !object.showGroupDetails}" 
                                               ng-click="showObjectDetails(object); toggleReportShowGroupDetails(object);">
                                            </i>                                           
                                        </div>
                                        <div class="col-xs-11 col-md-11">
                                                <b>{{object.reportTypeName}}</b> <small> (вариантов: {{object.paramsetsCount || 0}}) </small>
                                        </div>


                                    </td>

                                </tr>
                                <tr>

                                    <!--          Внутренняя(раскрывающая) таблица с данными    -->
                                <table id="dataParamsetsTabl" class="crud-grid table table-bordered table-condensed table-hover nmc-child-table" ng-show="object.showGroupDetails">  
                                    <thead>
                                        <tr class="nmc-child-table-header">
    <!--                                            td for buttons-->
                                            <th class="nmc-btn-toolbar-in-table-3"></th>
                                            <th ng-repeat="paramsetColumn in paramsetColumns" ng-class="paramsetColumn.class">
                                                {{paramsetColumn.header}}
                                            </th>
                                            <th class="nmc-td-for-button"></th>
                                            <th>Действует с</th>
                                        </tr>
                                    </thead>    
                                     <tr ng-repeat="oldObject in object.paramsets | orderBy:orderBy.field:!orderBy.asc" ng-click="" ng-dblclick="">
                                         <td class="nmc-btn-toolbar-in-table-3">
                                            <i title="Сформировать отчет" class="btn btn-xs glyphicon glyphicon-play nmc-button-in-table-run" ng-click="editParamSet(object, oldObject, ctrlSettings.openModes.create)" ng-class="{'nmc-button-in-table-run-green':oldObject.checkFlag, 'nmc-button-in-table-run-red':!oldObject.checkFlag}"></i>
                                            <i title="Отредактировать параметры и сформировать отчет" class="btn btn-xs glyphicon glyphicon-edit nmc-button-in-table" ng-click="editParamSet(object, oldObject, ctrlSettings.openModes.edit)" data-target="#main_properties" data-toggle="tab"></i>                                                                

                                            <i title="Предварительный просмотр" class="btn btn-xs glyphicon glyphicon-eye-open nmc-button-in-table-run" ng-click="previewReport(object, oldObject)" ng-disabled="(object.reportType=='COMMERCE_REPORT')" ng-class="{'nmc-button-in-table-run-disabled': object.reportType=='COMMERCE_REPORT', 'nmc-button-in-table-run-green':oldObject.checkFlag, 'nmc-button-in-table-run-red':!oldObject.checkFlag}"></i>

                                         </td>
                                         <td>
                                             <span ng-class="{'nmc-distinguish': oldObject._default}">{{oldObject.name}} <span ng-show="isSystemuser()"> (id = {{oldObject['id']}})</span></span>
                                         </td>
                                         <td>
                                             <span ng-class="{'nmc-distinguish': oldObject._default}">{{oldObject.reportTemplate.name}}</span>
                                         </td>
                                         <td>
                                             <span ng-class="{'nmc-distinguish': oldObject._default}">{{oldObject.reportPeriod.caption}}</span>
                                         </td>
                                         <td>
                                             <span ng-class="{'nmc-distinguish': oldObject._default}">{{oldObject.outputFileType || "не задан"}}</span>
                                         </td>
                                         <td class="nmc-text-align-center">
                                             <span ng-show="oldObject.outputFileType=='ZIP'||oldObject.outputFileZipped"><i title="Архивировать" class="fa fa-cube"></i></span>
                                         </td>
                                         <td>
                                             <span ng-class="{'nmc-distinguish': oldObject._default}">{{oldObject.activeStartDate | date:'dd.MM.yyyy'}}</span>
                                         </td>

                                     </tr>
                                    </table>         

                                </tr>


                            </table>  

                    </td>     
                    </tr>
                    <!--        End Построение таблицы с данными-->
                    <tr>
                        <td>

                        </td>
                    </tr>
                </table>          
</div>
        </div> <!-- tabpanel -->
    </div> <!-- tabcontent -->
    </div>
<div nmc-paramset-modal></div>
<div nmc-view-message-for-user 
     message-for-user="{{messageForUser}}" 
     btn-click="editParamSet(currentReportType, currentObject, ctrlSettings.openModes.edit)"
     show-ok-button="{{showMessageForUserModalExFlag}}"
     btn-ok-caption="Настройка параметров"
     show-cancel-button="true"
     btn-cancel-caption="Ok"
     >
</div>
<!--
<div id="messageForUserModal" class="modal fade nmc-modal-window" role="dialog"
	aria-labelledby="messageForUserLabel" tabindex="-1">

	<div class="modal-dialog modal-content nmc-modal-dialog-low">

		<div class="modal-header nmc-modal-header">
            <button type="button" class="close nmc-close-button" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			<h3 id="messageForUserLabel" class="nmc-h3">
				Внимание! 
			</h3>
		</div>
		<div class="modal-body nmc-modal-body paddingLeftRight15">
			<form name="moveForm" novalidate>
                <pre class="nmc-textfield">
                    {{'\n'+messageForUser}}  
                </pre>
			</form>
		</div>
		<div class="modal-footer nmc-modal-footer">
				<div class="container-fluid">

					<div class="row">
						<div class="col-xs-offset-4 col-md-5">
							<button ng-show="showMessageForUserModalExFlag" class="btn btn-xs btn-default btn-block nmc-ok-button" data-dismiss="modal" data-target="#main_properties" data-toggle="tab"
								ng-click="editParamSet(currentReportType, currentObject, ctrlSettings.openModes.edit)">
								Настройка параметров
							</button>
						</div>

						<div class="pull-right col-xs-offset-2 col-md-3 noPadding noMargin">
							<button class="btn btn-xs btn-default btn-primary btn-block nmc-ok-button" data-dismiss="modal"
								ng-click="exit('#moveToArchive');">
								Ок
							</button>                            
						</div>
					</div>
				</div>		
		</div>
		<span class="alert alert-error dialogErrorMessage"
			ng-show="errorOnSubmit"> Request error
		</span> <span class="alert alert-error dialogErrorMessage"
			ng-show="errorIllegalAccess"> Request illegal access
		</span>
	</div>
</div>
-->
</div>