<div>Портал / Отчеты</div>
<h2>Отчеты</h2>

<div>
    <ul>
        <li><a tabindex="-1" data-target="#paramReportModal" data-toggle="modal"><i class="btn btn-default btn-xs glyphicon" ng-click="newNode()" title="Отчет ююю">Коммерческий отчет</i></a></li>
        <li><a tabindex="-1" data-target="#paramReportModal" data-toggle="modal"><i class="btn btn-default btn-xs glyphicon" ng-click="newNode()" title="Отчет ююю">Сводный отчет</i></a></li>
        <li><a tabindex="-1" data-target="#paramReportModal" data-toggle="modal"><i class="btn btn-default btn-xs glyphicon" ng-click="newNode()" title="Отчет ююю">Еще какой-то отчет</i></a></li>
        <li class="divider"></li>
        <li><a tabindex="-1" href="#">и т.д.</a></li>
    </ul>
</div>

<!--Params for report ""-->
<div id="paramReportModal" class="modal fade" role="dialog"
	aria-labelledby="paramReportLabel" tabindex="-1">

	<div class="modal-dialog  modal-content modalWindow_wide">

		<div class="modal-header">
			<h3 id="paramReportLabel">
				Параметры Коммерческого отчета
			</h3>
		</div>       
        
                <div class="modal-body modal-scrollable-area1">
                         <form class="form-horizontal">
                             <div class="control-group marginBottom10">
                                    <label class="control-label" for="inputInterval">Укажите временной интервал:</label>
                                    <div class="controls">
                                        <input type="text" id="inputInterval" name="daterange" value="2015-01-01 - 2015-01-31"/>
                                 </div>
                             </div>
                             <div>
                                 <label class="control-label">Выберете объект:</label>
                             </div>
                             <div crud-grid-objects table="'../api/subscr/contObjects'"
                                                columns='[

                                                          {"name":"fullName", "header" : "Название", "class":"col-md-5"},
                                                         {"name":"fullAddress", "header" : "Адрес", "class":"col-md-5"}

                                                        ]'

                                                captions='{"loading":"loading", "totalElements":"totalElements"}'
                                                exprops='{"idColumnName":"id", "defaultOrderBy" : "fullName"}'

                                                breports='true'  
                                                bgroup='true'

                                                 bextramenu='true'

                                                 bobject='true'
                                                                             

                                                 datasource='[
                                                {
                                                  "id":"753",
                                                  "fullName": "Тестовый контейнер для разработки",
                                                  "fullAddress": "Новые Васюки, ул. Московская, д. 56"


                                                }
                                                                 ,{    "id":"754",
                                                             "fullName": "Контейнер 1",
                                                  "fullAddress": "Ижевск, 30 лет Победы, 31"


                                                }

                                                ]'


                                                    zpointcolumns='[

                                                        {"name":"zpointType", "header" : " ", "class":"col-md-1"},
                                                          {"name":"zpointName", "header" : "Наименование", "class":"col-md-2"},
                                                         {"name":"zpointModel", "header" : "Модель", "class":"col-md-2"},
                                                        {"name":"zpointNumber", "header" : "Номер", "class":"col-md-2"},
                                                       {"name":"zpointLastDataDate", "header" : "Последние данные", "class":"col-md-2"}
                                                        ]'     
                                                      zpointdata='[
                                                {

                                                  "zpointId": "1",
                                                  "zpointType": "GVS",
                                                   "zpointName": "ГВС",
                                                  "zpointModel": "ТЭМ-106", 
                                                    "zpointNumber": "1066502",
                                                  "zpointLastDataDate": "25.02.2015",
                                                    "zpointParent": "754"              
                                                }
                                                                 ,{

                                                  "zpointId": "2",
                                                  "zpointType": "TS",
                                                   "zpointName": "TС",
                                                  "zpointModel": "ТЭМ-106", 
                                                    "zpointNumber": "1066502",
                                                  "zpointLastDataDate": "25.02.2015",
                                                    "zpointParent": "754"              
                                                }

                                                ]'

                             ></div>
                             
<!--
                            <div class="control-group">
                                <div class="controls">
                                    <button type="submit" class="btn">Сформировать</button>
                                </div>
                            </div>
-->
                        </form>   
                        
                </div>    
            
		<div class="modal-footer">
				<div class="container-fluid dialogMarginButtons">

					<div class="row">
<!--
						<div class="col-xs-offset-2 col-md-3">
							<input type="submit" class="btn btn-primary btn-block btn-xs"
								ng-click=""
								value="Сохранить" />
						</div>
-->

						<div class="pull-right col-xs-offset-2 col-md-3">
							<button class="btn btn-default btn-block btn-xs" data-dismiss="modal"
								ng-click="exit('#currentObject')">
								Закрыть
							</button>
						</div>
					</div>
				</div>		
		</div>
		<span class="alert alert-error dialogErrorMessage"
			ng-show="errorOnSubmit"> Request error
		</span> <span class="alert alert-error dialogErrorMessage"
			ng-show="errorIllegalAccess"> Request illegal access
		</span>
	</div>
</div>

<script type="text/javascript">
        $(document).ready(function() {
          $('input[name="daterange"]').daterangepicker(
              { 
                locale: {cancelLabel:'Закрыть'},
                format: 'YYYY-MM-DD',
                startDate: '2015-01-01',
                endDate: '2015-12-31',
                ranges: {
                    'Сегодня': [moment(), moment()],
                    'Вчера': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
                    'Последние 7 дней': [moment().subtract(6, 'days'), moment()],
                    'Последние 30 дней': [moment().subtract(29, 'days'), moment()],
                    'Этот месяц': [moment().startOf('month'), moment().endOf('month')],
                    'Последний месяц': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
                } 
              },
              function(start, end, label) {
                  $scope.reportStart = start;
                $scope.reportEnd = end; 
                alert('Выбран диапазон дат: ' + start.format('YYYY-MM-DD') + ' - ' + end.format('YYYY-MM-DD'));
              }
            );
        });
</script>